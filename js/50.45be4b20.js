"use strict";(self["webpackChunkfinal"]=self["webpackChunkfinal"]||[]).push([[50],{50:function(e,l,a){a.r(l),a.d(l,{default:function(){return Z}});var s=a(252),t=a(577),r=a(963);const o=(0,s.uE)('<div class="container my-5 my-lg-6"><div class="row row-cols-1 row-cols-lg-4 g-3 align-items-center"><div class="col d-none d-lg-block bg-dark text-light border border-2 border-white"><p class="mb-0 px-3 py-4 h5">購物車結帳流程</p></div><div class="col d-none d-lg-block bg-light border border-2 border-white"><p class="mb-0 px-3 py-4 h5">1. 放入購物車</p></div><div class="col bg-dark text-light border border-2 border-white"><p class="mb-0 px-3 py-4 h5">2. 資料確認</p></div><div class="col d-none d-lg-block bg-light border border-2 border-white"><p class="mb-0 px-3 py-4 h5">3. 完成購物</p></div></div></div>',1),i={key:0,class:"container"},d=(0,s._)("h2",null,"選購的商品",-1),c={class:"table align-middle"},n=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"圖片"),(0,s._)("th",null,"商品名稱"),(0,s._)("th",null,"單一價格"),(0,s._)("th",null,"數量"),(0,s._)("th",null,"單品總價")])],-1),m={style:{width:"200px"}},u={key:0,class:"h5"},b={key:1},h={class:"h6"},p={class:"h5"},g={class:"row mb-3"},f={class:"col-md-12 text-end"},_=(0,s.Uk)(" 應付金額 "),v={class:"h4 fw-bold text-danger ms-1 ms-lg-2"},w={class:"col-lg-8"},y=(0,s._)("h1",{class:"h4 text-center fw-bold mb-3"},"訂單資訊",-1),k={class:"mb-3"},x=(0,s._)("label",{for:"email",class:"form-label"},"收件人信箱",-1),V={class:"mb-3"},D=(0,s._)("label",{for:"name",class:"form-label"},"收件人姓名",-1),C={class:"mb-3"},W=(0,s._)("label",{for:"tel",class:"form-label"},"收件人手機號碼",-1),$={class:"mb-3"},z=(0,s._)("label",{for:"address",class:"form-label"},"收件人地址",-1),U={class:"mb-3"},q=(0,s._)("label",{for:"message",class:"form-label"},"留言",-1),P={class:"col-lg-8 text-end my-3 my-lg-4"},S={class:"row"},j={class:"col-lg-6 mb-3 my-lg-0"},B={class:"col-lg-6 my-1 my-lg-0"},F=["disabled"];function E(e,l,a,E,H,I){const L=(0,s.up)("v-field"),Y=(0,s.up)("error-message"),Z=(0,s.up)("v-form");return(0,s.wg)(),(0,s.iD)(s.HY,null,[o,this.cartData.carts.length?((0,s.wg)(),(0,s.iD)("div",i,[d,(0,s._)("table",c,[n,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(H.cartData.carts,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id},[(0,s._)("td",m,[(0,s._)("div",{style:(0,t.j5)([{backgroundImage:`url(${e.product.imageUrl})`},{height:"100px","background-size":"cover","background-position":"center"}])},null,4)]),(0,s._)("td",null,(0,t.zw)(e.product.title),1),(0,s._)("td",null,[e.product.price===e.product.origin_price?((0,s.wg)(),(0,s.iD)("div",u," 現在只要 "+(0,t.zw)(e.product.price)+" 元 ",1)):((0,s.wg)(),(0,s.iD)("div",b,[(0,s._)("del",h,"原價 "+(0,t.zw)(e.product.origin_price)+" 元",1),(0,s._)("div",p,"現在只要 "+(0,t.zw)(e.product.price)+" 元",1)]))]),(0,s._)("td",null,(0,t.zw)(e.qty),1),(0,s._)("td",null," $ "+(0,t.zw)(e.total),1)])))),128))])]),(0,s._)("div",g,[(0,s._)("div",f,[(0,s._)("p",null,[_,(0,s._)("span",v," NT$ "+(0,t.zw)(Math.round(H.cartData.total)),1)])])])])):(0,s.kq)("",!0),(0,s.Wm)(Z,{ref:"form",onSubmit:I.onSubmit,class:"row justify-content-center"},{default:(0,s.w5)((({errors:e})=>[(0,s._)("div",w,[y,(0,s._)("div",k,[x,(0,s.Wm)(L,{id:"email",name:"email",type:"email",class:(0,t.C_)(["form-control",{"is-invalid":e["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:H.form.user.email,"onUpdate:modelValue":l[0]||(l[0]=e=>H.form.user.email=e)},null,8,["class","modelValue"]),(0,s.Wm)(Y,{name:"email",class:"invalid-feedback"})]),(0,s._)("div",V,[D,(0,s.Wm)(L,{id:"name",name:"姓名",type:"text",class:(0,t.C_)(["form-control",{"is-invalid":e["姓名"]}]),placeholder:"請輸入姓名",rules:"max:12||required",modelValue:H.form.user.name,"onUpdate:modelValue":l[1]||(l[1]=e=>H.form.user.name=e)},null,8,["class","modelValue"]),(0,s.Wm)(Y,{name:"姓名",class:"invalid-feedback"})]),(0,s._)("div",C,[W,(0,s.Wm)(L,{id:"tel",name:"電話",type:"tel",class:(0,t.C_)(["form-control",{"is-invalid":e["電話"]}]),placeholder:"請輸入電話",modelValue:H.form.user.tel,"onUpdate:modelValue":l[2]||(l[2]=e=>H.form.user.tel=e),rules:I.isFormPhone},null,8,["class","modelValue","rules"]),(0,s.Wm)(Y,{name:"電話",class:"invalid-feedback"})]),(0,s._)("div",$,[z,(0,s.Wm)(L,{id:"address",name:"地址",type:"text",class:(0,t.C_)(["form-control",{"is-invalid":e["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:H.form.user.address,"onUpdate:modelValue":l[3]||(l[3]=e=>H.form.user.address=e)},null,8,["class","modelValue"]),(0,s.Wm)(Y,{name:"地址",class:"invalid-feedback"})]),(0,s._)("div",U,[q,(0,s.wy)((0,s._)("textarea",{id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":l[4]||(l[4]=e=>H.form.message=e)},null,512),[[r.nr,H.form.message]])])]),(0,s._)("div",P,[(0,s._)("div",S,[(0,s._)("div",j,[(0,s._)("button",{class:"btn btn-outline-dark w-100",onClick:l[5]||(l[5]=(...e)=>I.goBackPage&&I.goBackPage(...e)),type:"button"}," 回上一頁 ")]),(0,s._)("div",B,[(0,s._)("button",{class:"btn btn-primary w-100",disabled:Object.keys(e).length>0||0===H.cartData.total,type:"submit"}," 送出訂單 ",8,F)])])])])),_:1},8,["onSubmit"])],64)}var H=a(868),I={data(){return{cartData:{carts:[]},isLoadingItem:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{getCart(){const e="https://vue3-course-api.hexschool.io/v2/api/fengchiliu/cart";this.$http.get(e).then((e=>{this.cartData=e.data.data,H.Z.emit("get-cart"),this.isLoading=!1}))},goBackPage(){this.$router.go(-1)},isFormPhone(e){const l=/^(09)[0-9]{8}$/;return!!l.test(e)||"需要正確的電話號碼"},onSubmit(){const e=this.form;this.$http.post("https://vue3-course-api.hexschool.io/api/fengchiliu/order",{data:e}).then((e=>{alert(e.data.message),this.$refs.form.resetForm(),this.getCart(),this.$router.push("/result")}))}},mounted(){this.getCart()}},L=a(744);const Y=(0,L.Z)(I,[["render",E]]);var Z=Y}}]);
//# sourceMappingURL=50.45be4b20.js.map