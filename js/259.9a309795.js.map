{"version":3,"file":"js/259.9a309795.js","mappings":"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","sources":["webpack://final/./src/views/CartView.vue","webpack://final/./src/views/CartView.vue?73a2"],"sourcesContent":["<template>\r\n  <div class=\"container my-5 my-lg-6\">\r\n    <div class=\"row row-cols-1 row-cols-lg-4 g-3 align-items-center\">\r\n      <div\r\n        class=\"col d-none d-lg-block bg-dark text-light border border-2 border-white\"\r\n      >\r\n        <p class=\"mb-0 px-3 py-4 h5\">購物車結帳流程</p>\r\n      </div>\r\n      <div class=\"col d-none d-lg-block bg-dark text-light border border-2 border-white\">\r\n        <p class=\"mb-0 px-3 py-4 h5\">1. 放入購物車</p>\r\n      </div>\r\n      <div class=\"col d-none d-lg-block bg-light border border-2 border-white\">\r\n        <p class=\"mb-0 px-3 py-4 h5\">2. 資料確認</p>\r\n      </div>\r\n      <div class=\"col  d-none d-lg-block bg-light border border-2 border-white\">\r\n        <p class=\"mb-0 px-3 py-4 h5\">3. 完成購物</p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"container\" v-if=\"this.cartData.carts.length\">\r\n    <h2>選購的商品</h2>\r\n    <table class=\"table align-middle\">\r\n      <thead>\r\n        <tr>\r\n          <th>圖片</th>\r\n          <th>商品名稱</th>\r\n          <th>單一價格</th>\r\n          <th>數量</th>\r\n          <th>單品總價</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr v-for=\"product in cartData.carts\" :key=\"product.id\">\r\n          <td style=\"width: 200px\">\r\n            <div\r\n              :style=\"{\r\n                backgroundImage: `url(${product.product.imageUrl})`,\r\n              }\"\r\n              style=\"\r\n                height: 100px;\r\n                background-size: cover;\r\n                background-position: center;\r\n              \"\r\n            ></div>\r\n          </td>\r\n          <td>\r\n            {{ product.product.title }}\r\n          </td>\r\n          <td>\r\n            <div class=\"h5\" v-if=\"product.product.price === product.product.origin_price\">\r\n              現在只要 {{ product.product.price }} 元\r\n            </div>\r\n            <div v-else>\r\n              <del class=\"h6\">原價 {{ product.product.origin_price }} 元</del>\r\n              <div class=\"h5\">現在只要 {{ product.product.price }} 元</div>\r\n            </div>\r\n          </td>\r\n          <td>\r\n            <select\r\n              class=\"form-select\"\r\n              v-model=\"product.qty\"\r\n              @change=\"updateCartItem(product)\"\r\n              :disabled=\"isLoadingItem === product.id\"\r\n            >\r\n              <option\r\n                :value=\"num\"\r\n                v-for=\"num in 10\"\r\n                :key=\"`${num} + ${product.id}`\"\r\n              >\r\n                {{ num}}\r\n              </option>\r\n            </select>\r\n          </td>\r\n          <td>\r\n            $ {{product.total}}\r\n          </td>\r\n          <td>\r\n            <button\r\n                type=\"button\"\r\n                class=\"btn btn-outline-danger\"\r\n                @click=\"delToCart(product.id)\"\r\n                :disabled=\"isLoadingItem === product.id\"\r\n              >\r\n                <!-- 加入 BS 讀取效果、加入判斷條件 -->\r\n                <span\r\n                  class=\"spinner-border spinner-border-sm\"\r\n                  v-show=\"isLoadingItem === product.id\"\r\n                ></span>\r\n                刪除品項\r\n            </button>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    <!-- footer -->\r\n    <div class=\"row mb-3\">\r\n      <div class=\"col-md-12 text-end\">\r\n        <p>\r\n          應付金額\r\n          <span class=\"h4 fw-bold text-danger\"> NT$ {{ cartData.total }}</span>\r\n        </p>\r\n      </div>\r\n      <div class=\"col-12\">\r\n        <div class=\"row justify-content-end\">\r\n          <div class=\"col-lg-3 mb-3\">\r\n            <button\r\n              class=\"btn btn-outline-dark w-100\"\r\n              @click=\"goProductsPage\"\r\n              type=\"button\"\r\n            >\r\n              繼續購物\r\n            </button>\r\n          </div>\r\n          <div class=\"col-lg-3\">\r\n            <button\r\n              class=\"btn btn-primary w-100\"\r\n              type=\"button\"\r\n              @click=\"goOrderPage\"\r\n              :disabled=\"cartData.total === 0\"\r\n            >\r\n              確認訂單，結帳\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"container\" v-else>\r\n    <h1>目前沒有選購任何商品</h1>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport emitter from '@/utils/emitter'\r\nexport default {\r\n  data () {\r\n    return {\r\n      cartData: {\r\n        carts: []\r\n      },\r\n      isLoadingItem: ''\r\n    }\r\n  },\r\n  methods: {\r\n    getCart () {\r\n      const url = `${process.env.VUE_APP_API}/v2/api/${process.env.VUE_APP_PATH}/cart`\r\n      this.$http.get(url)\r\n        .then((res) => {\r\n          console.log('getCart(CartView):', res)\r\n          this.cartData = res.data.data\r\n        })\r\n    },\r\n    delToCart (id) {\r\n      this.isLoadingItem = id\r\n      this.$http.delete(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${id}`).then((res) => {\r\n        this.isLoadingItem = ''\r\n        emitter.emit('get-cart')\r\n        this.getCart()\r\n      })\r\n    },\r\n    updateCartItem (item) { // 更新單一商品數量\r\n      const data = { // 建構資料格式(在api文獻中)\r\n        product_id: item.id,\r\n        qty: item.qty\r\n      }\r\n      this.isLoadingItem = item.id\r\n      this.$http.put(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${item.id}`, { data }).then((res) => {\r\n        console.log('updateCartItem:', res)\r\n        this.getCart() // 當我加入購物車後再重新取得購物車的內容\r\n        this.isLoadingItem = ''// 清空重置\r\n      })\r\n    },\r\n    goOrderPage () {\r\n      this.$router.push('/order')\r\n    },\r\n    goProductsPage () {\r\n      this.$router.push('/products')\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getCart()\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./CartView.vue?vue&type=template&id=031e47bc\"\nimport script from \"./CartView.vue?vue&type=script&lang=js\"\nexport * from \"./CartView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\Hex_School\\\\Vue_Homework\\\\final\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","_hoisted_26","_hoisted_1","cartData","carts","length","_createElementBlock","_hoisted_3","_hoisted_5","_Fragment","_renderList","$data","product","key","id","imageUrl","_toDisplayString","title","price","origin_price","_hoisted_8","qty","$event","onChange","$options","disabled","num","value","_hoisted_12","total","type","onClick","_hoisted_24","_hoisted_27","data","isLoadingItem","methods","getCart","url","this","$http","get","then","res","console","log","delToCart","delete","emitter","updateCartItem","item","product_id","put","goOrderPage","$router","push","goProductsPage","mounted","__exports__","render"],"sourceRoot":""}