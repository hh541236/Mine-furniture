"use strict";(self["webpackChunkfinal"]=self["webpackChunkfinal"]||[]).push([[259],{259:function(t,e,l){l.r(e),l.d(e,{default:function(){return j}});var i=l(252),a=l(577),d=l(963);const o=(0,i.uE)('<div class="container my-5 my-lg-6"><div class="row row-cols-1 row-cols-lg-4 g-3 align-items-center"><div class="col d-none d-lg-block bg-dark text-light border border-2 border-white"><p class="mb-0 px-3 py-4 h5">購物車結帳流程</p></div><div class="col d-none d-lg-block bg-dark text-light border border-2 border-white"><p class="mb-0 px-3 py-4 h5">1. 放入購物車</p></div><div class="col d-none d-lg-block bg-light border border-2 border-white"><p class="mb-0 px-3 py-4 h5">2. 資料確認</p></div><div class="col d-none d-lg-block bg-light border border-2 border-white"><p class="mb-0 px-3 py-4 h5">3. 完成購物</p></div></div></div>',1),s={key:0,class:"container"},r=(0,i._)("h2",null,"選購的商品",-1),n={class:"table align-middle"},c=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",null,"圖片"),(0,i._)("th",null,"商品名稱"),(0,i._)("th",null,"單一價格"),(0,i._)("th",null,"數量"),(0,i._)("th",null,"單品總價")])],-1),u={style:{width:"200px"}},g={key:0,class:"h5"},h={key:1},p={class:"h6"},b={class:"h5"},_=["onUpdate:modelValue","onChange","disabled"],v=["value"],w=["onClick","disabled"],m={class:"spinner-border spinner-border-sm"},k=(0,i.Uk)(" 刪除品項 "),y={class:"row mb-3"},C={class:"col-md-12 text-end"},f=(0,i.Uk)(" 應付金額 "),D={class:"h4 fw-bold text-danger"},x={class:"col-12"},I={class:"row justify-content-end"},$={class:"col-lg-3 mb-3"},P={class:"col-lg-3"},z=["disabled"],L={key:1,class:"container"},U=(0,i._)("h1",null,"目前沒有選購任何商品",-1),q=[U];function H(t,e,l,U,H,O){return(0,i.wg)(),(0,i.iD)(i.HY,null,[o,this.cartData.carts.length?((0,i.wg)(),(0,i.iD)("div",s,[r,(0,i._)("table",n,[c,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(H.cartData.carts,(t=>((0,i.wg)(),(0,i.iD)("tr",{key:t.id},[(0,i._)("td",u,[(0,i._)("div",{style:(0,a.j5)([{backgroundImage:`url(${t.product.imageUrl})`},{height:"100px","background-size":"cover","background-position":"center"}])},null,4)]),(0,i._)("td",null,(0,a.zw)(t.product.title),1),(0,i._)("td",null,[t.product.price===t.product.origin_price?((0,i.wg)(),(0,i.iD)("div",g," 現在只要 "+(0,a.zw)(t.product.price)+" 元 ",1)):((0,i.wg)(),(0,i.iD)("div",h,[(0,i._)("del",p,"原價 "+(0,a.zw)(t.product.origin_price)+" 元",1),(0,i._)("div",b,"現在只要 "+(0,a.zw)(t.product.price)+" 元",1)]))]),(0,i._)("td",null,[(0,i.wy)((0,i._)("select",{class:"form-select","onUpdate:modelValue":e=>t.qty=e,onChange:e=>O.updateCartItem(t),disabled:H.isLoadingItem===t.id},[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)(10,(e=>(0,i._)("option",{value:e,key:`${e} + ${t.id}`},(0,a.zw)(e),9,v))),64))],40,_),[[d.bM,t.qty]])]),(0,i._)("td",null," $ "+(0,a.zw)(t.total),1),(0,i._)("td",null,[(0,i._)("button",{type:"button",class:"btn btn-outline-danger",onClick:e=>O.delToCart(t.id),disabled:H.isLoadingItem===t.id},[(0,i.wy)((0,i._)("span",m,null,512),[[d.F8,H.isLoadingItem===t.id]]),k],8,w)])])))),128))])]),(0,i._)("div",y,[(0,i._)("div",C,[(0,i._)("p",null,[f,(0,i._)("span",D," NT$ "+(0,a.zw)(H.cartData.total),1)])]),(0,i._)("div",x,[(0,i._)("div",I,[(0,i._)("div",$,[(0,i._)("button",{class:"btn btn-outline-dark w-100",onClick:e[0]||(e[0]=(...t)=>O.goProductsPage&&O.goProductsPage(...t)),type:"button"}," 繼續購物 ")]),(0,i._)("div",P,[(0,i._)("button",{class:"btn btn-primary w-100",type:"button",onClick:e[1]||(e[1]=(...t)=>O.goOrderPage&&O.goOrderPage(...t)),disabled:0===H.cartData.total}," 確認訂單，結帳 ",8,z)])])])])])):((0,i.wg)(),(0,i.iD)("div",L,q))],64)}var O=l(868),T={data(){return{cartData:{carts:[]},isLoadingItem:""}},methods:{getCart(){const t="https://vue3-course-api.hexschool.io/v2/api/fengchiliu/cart";this.$http.get(t).then((t=>{console.log("getCart(CartView):",t),this.cartData=t.data.data}))},delToCart(t){this.isLoadingItem=t,this.$http.delete(`https://vue3-course-api.hexschool.io/api/fengchiliu/cart/${t}`).then((t=>{this.isLoadingItem="",O.Z.emit("get-cart"),this.getCart()}))},updateCartItem(t){const e={product_id:t.id,qty:t.qty};this.isLoadingItem=t.id,this.$http.put(`https://vue3-course-api.hexschool.io/api/fengchiliu/cart/${t.id}`,{data:e}).then((t=>{console.log("updateCartItem:",t),this.getCart(),this.isLoadingItem=""}))},goOrderPage(){this.$router.push("/order")},goProductsPage(){this.$router.push("/products")}},mounted(){this.getCart()}},V=l(744);const Y=(0,V.Z)(T,[["render",H]]);var j=Y}}]);
//# sourceMappingURL=259.9a309795.js.map